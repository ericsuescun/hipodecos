<div class="row">
  <div class="col-12 col-lg-8 mx-auto">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Código</th>
          <th>Descr.</th>
          <th>Guard.</th>
          <th>Por</th>
          <th scope="3"></th>
        </tr>
      </thead>
      <tbody>
        <% inform.blocks.each do |block| %>
          <tr>
            <td><%= block.block_tag %></td>
            <td><%= block.description %></td>
            <td><%= block.stored == true ? 'Si' : 'No' %></td>
            <td><%= User.where(id: block.user_id).first.try(:first_name) %></td>
            <td><%= link_to 'Revisar', block_path(block) %></td>
            <td><%= link_to 'Editar', edit_block_path(block) %></td>
            <td><%= link_to 'Borrar', block, method: :delete, data: { confirm: '¿Confirmas la operación?' } %></td>
          </tr>
          <% block.objections.each do |objection| %>
            <tr class=<%= objection.closed == false ? "objection" : "" %> >
              <td><span class="badge badge-<%= objection.closed == false ? "danger" : "warning" %>">No conformidad: </td>
              <td><span class="badge badge-<%= objection.closed == false ? "danger" : "warning" %>"><%= objection_title(objection.obcode_id) %></td>
              <!-- <td><%= objection.description %></td> -->
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
  <div class="col-12 col-lg-4">
    <h4>Agregar bloque</h4>
    <%= form_for [inform, inform.blocks.build] do |form| %>
      <div class="form-group">
        <%= form.label "Descripción" %>
        <%= form.text_area :description, class: "form-control form-control-lg input" %>
      </div>

      <div class="form-group">
        <%= form.check_box :stored %>
        <%= form.label "Bloque guardado" %>
      </div>
      <div class="actions">
        <%= form.submit "Agregar", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
<div class="row">

</div>
