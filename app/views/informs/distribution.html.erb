<div class="container-fluid">
	<%= form_tag assign_informs_path + "?di=#{params[:di]}&mi=#{params[:mi]}&yi=#{params[:yi]}&df=#{params[:df]}&mf=#{params[:mf]}&yf=#{params[:yf]}", method: :put do %>
		

		<div class="row mb-3">
			<div class="col-12 col-lg-4 col-xl-4 offset-lg-2">
				<%= select_tag(:pathologist_id, options_from_collection_for_select(@users, :id, :fullname), { prompt: 'Seleccionar o dejar así para desasignar', class: "form-control"}) %>
			</div>
			<div class="col-12 col-lg-4 col-xl-4">
				<%= submit_tag "Asignar lo marcado", class: "btn btn-outline-primary btn-block" %>
			</div>
		</div>
	
		<div class="row">
			<div class="col-12 col-lg-6 col-xl-6">
				<h1>Biopsias</h1>
				<table class="table table-hover inform-assing">
					<thead>
						<tr>
							<th></th>
							<th>id</th>
							<th>Informe</th>
							<th>Placas</th>
							<th>Placas listas</th>
							<th>Hace patología</th>
						</tr>
					</thead>
					<tbody>
						<% @informs.each do |inform| %>
							<% if inform.inf_type != 'cito' %>
								<tr>
									<td><%= check_box_tag "inform_ids[]", inform.id %></td>
									<td><%= inform.id %></td>
									<td><%= inform.tag_code %></td>
									<td><%= inform.slides.count %></td>
									<td><%= inform.slides.where(colored: true, covered: true, tagged: true).count %></td>
									<td><%= User.where(id: inform.pathologist_id).first.try(:fullname) %></td>
								</tr>
							<% end %>
							
						<% end %>
					</tbody>
				</table>
			</div>
			<div class="col-12 col-lg-6 col-xl-6">
				<h1>Citologías</h1>
				<table class="table table-hover inform-assing">
					<thead>
						<tr>
							<th></th>
							<th>id</th>
							<th>Informe</th>
							<th>Placas</th>
							<th>Placas listas</th>
							<th>Revisa citología:</th>
							<th>Resultado (solo Cito)</th>
						</tr>
					</thead>
					<tbody>
						<% @informs.each do |inform| %>
							<% if inform.inf_type == 'cito' %>
								<tr>
									<td><%= check_box_tag "inform_ids[]", inform.id %></td>
									<td><%= inform.id %></td>
									<td><%= inform.tag_code %></td>
									<td><%= inform.slides.count %></td>
									<td><%= inform.slides.where(colored: true, covered: true, tagged: true).count %></td>
									<td><%= User.where(id: inform.pathologist_id).first.try(:fullname) %></td>
									<td><%= inform.diagnostics.first.try(:result) %></td>
								</tr>	
							<% end %>
						<% end %>
					</tbody>
				</table>
				<table class="table table-secondary inform-assing">
					<thead>
						<tr>
							<th></th>
							<th>id</th>
							<th>Informe</th>
							<th>Placas</th>
							<th>Placas listas</th>
							<th>Revisa citología:</th>
							<th>Resultado (solo Cito)</th>
						</tr>
					</thead>
					<tbody>
						<% @negative_cytos.each do |inform| %>
							<% if inform.inf_type == 'cito' %>
								<tr>
									<td></td>
									<td><%= inform.id %></td>
									<td><%= inform.tag_code %></td>
									<td><%= inform.slides.count %></td>
									<td><%= inform.slides.where(colored: true, covered: true, tagged: true).count %></td>
									<td>-no seleccionada-</td>
									<td><%= inform.diagnostics.first.try(:result) %></td>
								</tr>	
							<% end %>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	<% end %>
</div>