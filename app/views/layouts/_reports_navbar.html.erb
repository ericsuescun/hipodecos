<div class="container-fluid">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="/">Inicio</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContentB" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContentB">
      <ul class="navbar-nav mr-auto">
        <% if user_signed_in? %>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= 'active' if @tab == :sales %>" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Facturar por mes
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <% (0..2).each do |m| %>
                <%= link_to "C: #{m.month.ago.strftime('%b de %Y')}", billings_reports_path + "?init_date=" + m.month.ago.beginning_of_month.strftime("%d-%m-%Y") + "&final_date=" + m.month.ago.end_of_month.strftime("%d-%m-%Y") + "&inf_type=clin" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "H: #{m.month.ago.strftime('%b de %Y')}", billings_reports_path + "?init_date=" + m.month.ago.beginning_of_month.strftime("%d-%m-%Y") + "&final_date=" + m.month.ago.end_of_month.strftime("%d-%m-%Y") + "&inf_type=hosp" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "K: #{m.month.ago.strftime('%b de %Y')}", billings_reports_path + "?init_date=" + m.month.ago.beginning_of_month.strftime("%d-%m-%Y") + "&final_date=" + m.month.ago.end_of_month.strftime("%d-%m-%Y") + "&inf_type=cito" , class: "dropdown-item" %>
              <% end %>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= 'active' if @tab == :sales %>" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Facturar entre 15's
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <% (0..2).each do |m| %>
                <%= link_to "C: #{(Time.zone.now.beginning_of_month - (m + 1).month + 15.days).strftime("%b %d")} a #{(Time.zone.now.beginning_of_month - m.month).year == Time.zone.now.year ? (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%b %d") : (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%b %d de %Y")}", billings_reports_path + "?init_date=" + (Time.zone.now.beginning_of_month - (m + 1).month + 15.days).strftime("%d-%m-%Y") + "&final_date=" + (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%d-%m-%Y") + "&inf_type=clin" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "H: #{(Time.zone.now.beginning_of_month - (m + 1).month + 15.days).strftime("%b %d")} a #{(Time.zone.now.beginning_of_month - m.month).year == Time.zone.now.year ? (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%b %d") : (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%b %d de %Y")}", billings_reports_path + "?init_date=" + (Time.zone.now.beginning_of_month - (m + 1).month + 15.days).strftime("%d-%m-%Y") + "&final_date=" + (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%d-%m-%Y") + "&inf_type=hosp" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "K: #{(Time.zone.now.beginning_of_month - (m + 1).month + 15.days).strftime("%b %d")} a #{(Time.zone.now.beginning_of_month - m.month).year == Time.zone.now.year ? (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%b %d") : (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%b %d de %Y")}", billings_reports_path + "?init_date=" + (Time.zone.now.beginning_of_month - (m + 1).month + 15.days).strftime("%d-%m-%Y") + "&final_date=" + (Time.zone.now.beginning_of_month - m.month + 14.days).strftime("%d-%m-%Y") + "&inf_type=cito" , class: "dropdown-item" %>
              <% end %>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= 'active' if @tab == :sales %>" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Facturar entre 25's
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <% (0..2).each do |m| %>
                <%= link_to "C: #{(Time.zone.now.beginning_of_month - (m + 1).month + 25.days).strftime("%b %d")} a #{(Time.zone.now.beginning_of_month - m.month).year == Time.zone.now.year ? (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%b %d") : (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%b %d de %Y")}", billings_reports_path + "?init_date=" + (Time.zone.now.beginning_of_month - (m + 1).month + 25.days).strftime("%d-%m-%Y") + "&final_date=" + (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%d-%m-%Y") + "&inf_type=clin" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "H: #{(Time.zone.now.beginning_of_month - (m + 1).month + 25.days).strftime("%b %d")} a #{(Time.zone.now.beginning_of_month - m.month).year == Time.zone.now.year ? (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%b %d") : (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%b %d de %Y")}", billings_reports_path + "?init_date=" + (Time.zone.now.beginning_of_month - (m + 1).month + 25.days).strftime("%d-%m-%Y") + "&final_date=" + (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%d-%m-%Y") + "&inf_type=hosp" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "K: #{(Time.zone.now.beginning_of_month - (m + 1).month + 25.days).strftime("%b %d")} a #{(Time.zone.now.beginning_of_month - m.month).year == Time.zone.now.year ? (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%b %d") : (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%b %d de %Y")}", billings_reports_path + "?init_date=" + (Time.zone.now.beginning_of_month - (m + 1).month + 25.days).strftime("%d-%m-%Y") + "&final_date=" + (Time.zone.now.beginning_of_month - m.month + 24.days).strftime("%d-%m-%Y") + "&inf_type=cito" , class: "dropdown-item" %>
              <% end %>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= 'active' if @tab == :sales %>" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Facturado
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <% (0..2).each do |m| %>
                <%= link_to "C: #{m.month.ago.strftime('%b de %Y')}", sales_reports_path + "?init_date=" + m.month.ago.beginning_of_month.strftime("%d-%m-%Y") + "&final_date=" + m.month.ago.end_of_month.strftime("%d-%m-%Y") + "&inf_type=clin" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "H: #{m.month.ago.strftime('%b de %Y')}", sales_reports_path + "?init_date=" + m.month.ago.beginning_of_month.strftime("%d-%m-%Y") + "&final_date=" + m.month.ago.end_of_month.strftime("%d-%m-%Y") + "&inf_type=hosp" , class: "dropdown-item" %>
              <% end %>
              <div class="dropdown-divider"></div>
              <% (0..2).each do |m| %>
                <%= link_to "K: #{m.month.ago.strftime('%b de %Y')}", sales_reports_path + "?init_date=" + m.month.ago.beginning_of_month.strftime("%d-%m-%Y") + "&final_date=" + m.month.ago.end_of_month.strftime("%d-%m-%Y") + "&inf_type=cito" , class: "dropdown-item" %>
              <% end %>
            </div>
          </li>
            
        <% end %>
      </ul>
      <% if user_signed_in? %>
        <ul class="navbar-nav d-flex justify-content-end">
          
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Usuario: <%= current_user.first_name %> <%= current_user.last_name %>
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <%= link_to "Salir", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
            </div>
          </li>
        </ul>
      <% end %>
    </div>
  </nav>
</div>
